--- 
layout: parsons_post
---


<h2>people</h2>

<ul id="people" class="noPoints">
</ul>

<h2>randomiser</h2>
<button onclick="randomPerson()">random person!</button>
<span id="randomiser"></span>

<script type="text/javascript">

var people = [
{"student": "Sophia", "site": "https://sbeceiro.github.io/sophia-beceiro/"},
{"student": "Jacey", "site": ""},
{"student": "Claire", "site": ""},
{"student": "Avni", "site": ""},
{"student": "Elias", "site": ""},
{"student": "Jonnamarie", "site": ""},
{"student": "Joy", "site": "https://joyhsu0301.github.io/core-lab/"},
{"student": "Xian Yu", "site": ""},
{"student": "Vivian", "site": ""},
{"student": "Rachael", "site": ""},
{"student": "Si Ran", "site": "https://pangs176.github.io/hello/"},
{"student": "Evanna", "site": "https://evannaphan1.github.io/Phanny-Jokes/"},
{"student": "Erin", "site": ""},
{"student": "Tia", "site": ""}
]

async function randomPerson(){
	var person = people[Math.floor(Math.random()*people.length)]
	let randomiser = document.getElementById('randomiser')
	randomiser.innerHTML =`<a href=${person.site}>${person.student}</a>`
	if(person.site){
		const scrapeArr = person.site.split(/[^\-^a-zA-Z0-9\s\:]/)
		let username = scrapeArr[2];
		let repo = scrapeArr[5];
		// let username = 'agnescameron';
		// let repo = 'teaching-site';
	    const response = await fetch(`https://api.github.com/repos/${username}/${repo}/commits`, {
	      method: 'GET',
	      headers: {
	        'Content-Type': 'application/json',
	      },
	    });
	    const site = await response.json();
	    let date = new Date(site[0].commit.committer.date).toString().slice(0, -33);
	    randomiser.innerHTML += (`<span>'s last commit was at ${date}</span>`)
	}
}

function populateClass(person){
	document.getElementById('people').innerHTML+=`<li><a href=${person.site}>${person.student}</a></li>`
}

people.forEach(populateClass);

</script>
